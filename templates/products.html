{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">Products</h2>

<!-- Add Product Form -->
<form method="post" class="mb-5">
  <div class="row g-3">

    <div class="col-md-3">
      <input type="text" name="name" class="form-control" placeholder="Product Name" required>
    </div>

    <div class="col-md-2">
      <input type="number" name="cost_price" step="0.01" class="form-control" placeholder="Cost Price" required>
    </div>

    <div class="col-md-2">
      <input type="number" name="sell_price" step="0.01" class="form-control" placeholder="Selling Price" required>
    </div>

    <div class="col-md-2">
      <input type="number" name="stock" class="form-control" placeholder="Stock" required>
    </div>

    <div class="col-md-2">
      <select name="unit" class="form-select">
        {% for u in units %}
          <option value="{{ u }}">{{ u }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-1 d-grid">
      <button type="submit" class="btn btn-primary w-100">Add Product</button>
    </div>

  </div>
</form>

<!-- Products Table -->
<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Cost Price</th>
      <th>Selling Price</th>
      <th>Stock</th>
      <th>Unit</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for p in products %}
    <tr>
      <td>{{ p.name }}</td>
      <td>{{ p.cost_price }}</td>
      <td>{{ p.sell_price }}</td>
      <td>{{ p.stock }}</td>
      <td>{{ p.unit }}</td>
      <td>
        <!-- Edit Button -->
        <a href="/products/{{ p.id }}/edit" class="btn btn-sm btn-warning">Edit</a>

        <!-- Delete Form -->
        <form action="/products/{{ p.id }}/delete" method="post" style="display:inline;">
          <button type="submit" class="btn btn-sm btn-danger">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>


{% endblock %}